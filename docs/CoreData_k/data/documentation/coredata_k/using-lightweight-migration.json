{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Core Data는 일반적으로 경량 마이그레이션이라고 하는 자동 데이터 마이그레이션을 수행할 수 있습니다. 경량 마이그레이션은 원본과 대상 관리 객체 모델 간의 차이점으로부터 마이그레이션을 추론합니다."}]},{"anchor":"Generating-an-Inferred-Mapping-Model","level":3,"type":"heading","text":"Generating an Inferred Mapping Model"},{"type":"paragraph","inlineContent":[{"type":"text","text":"자동 경량 마이그레이션을 수행하려면, Core Data가 런타임에 원본(source) 및 대상(destination) 관리 객체 모델을 찾을 수 있어야 합니다. Core Data는 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle"},{"type":"text","text":" 클래스의 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1413705-allbundles"},{"type":"text","text":"과 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1408056-allframeworks"},{"type":"text","text":" 메서드에서 반환된 번들에서 모델을 찾습니다. 찾은 다음 Core Data는 영구(Persistant) 엔티티 및 속성에 대한 스키마 변경을 분석하고, 추론된 매핑 모델을 생성합니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"추론된 매핑 모델을 생성하려면 명확한 마이그레이션 패턴에 맞는 변경이 필요합니다. 예를 들어:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"속성의 추가"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"속성의 삭제"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"nonoptinal 속성의 optional 속성으로 변경"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"optional 속성이 non-optional 속성으로 변경 후 default 값 정의"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"엔티티나 프로퍼티의 이름 변경"}]}]}]},{"anchor":"Managing-Changes-to-Entities-and-Properties","level":3,"type":"heading","text":"Managing Changes to Entities and Properties"},{"type":"paragraph","inlineContent":[{"type":"text","text":"엔티티나 프로퍼티의 이름을 변경하는 경우, 대상 모델의 renaming identifier를 이에 맞는 원본 모델의 프로퍼티 또는 엔티티 이름으로 설정할 수 있습니다. Xcode Data Modeling tool’s 프로퍼티 인스펙터를 사용해 (엔티티 또는 속성에 대해) 관리되는 객체 모델의 renaming identifier를 설정할 수 있습니다. 예를 들어, 다음과 같이 할 수 있습니다:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Car 엔티티의 이름을 Automobile로 변경"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Car의 color 속성의 이름을 paintColor로 변경"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Renaming identifier 규범적인(canonical) 이름을 생성합니다. 그러니 renaming identifier를 원본 모델의 프로퍼티 이름을 설정하세요(프로퍼티가 이미 renaming identifier를 가지고 있다면 필요없습니다). 이것은 버전 2 모델의 프로퍼티의 이름을 변경할 수 있고, 버전 3에서 다시 변경할 수 있음을 의미합니다. 이름 변경은 버전 2에서 버전 3 또는 버전 1에서 버전 3으로 올바르게 작동합니다."}]},{"anchor":"Managing-Changes-to-Relationships","level":3,"type":"heading","text":"Managing Changes to Relationships"},{"type":"paragraph","inlineContent":[{"type":"text","text":"또한 경량 마이그레이션은 관계 및 관계의 타입의 변경 사항을 관리할 수 있습니다. 새로운 관계를 추가하거나 기존 관계를 삭제할 수 있습니다. 또한 속성처럼 renaming identifier를 사용해 관계의 이름을 변경할 수 있습니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"게다가, to-one에서 to-many로 변경하거나, 정렬되지 않은 to-many를 정렬되도록 관계를 변경할 수 있습니다. (그리고 반대의 경우도 마찬가지)"}]},{"anchor":"Managing-Changes-to-Hierarchies","level":3,"type":"heading","text":"Managing Changes to Hierarchies"},{"type":"paragraph","inlineContent":[{"type":"text","text":"계층의 엔티티를 추가, 삭제 및 이름을 변경할 수 있습니다. 또한 새로운 부모 또는 자식 엔티티를 생성하고, 엔티티 계층에서 프로퍼티를 위아래로 이동할 수 있습니다. 엔티티를 계층 밖으로 이동할 수 있습니다. 하지만 엔티티 계층을 병합할 수는 없습니다. 두 개의 기존 엔티티가 원본에서 공통 부모를 공유하지 않는 경우, 대상(destination)에서 공통 부모를 공유할 수 없습니다."}]},{"anchor":"Confirming-Whether-Core-Data-Can-Infer-the-Model","level":3,"type":"heading","text":"Confirming Whether Core Data Can Infer the Model"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Core Data가 마이그레이션의 작업을 실제로 수행하지 않고도 원본과 대상 모델 사이에서 매핑 모델을 추론할 수 있는지 미리 검증하려는 경우, "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel"},{"type":"text","text":"의 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel\/1506468-inferredmappingmodel"},{"type":"text","text":" 메서드를 사용할 수 있습니다. Core Data가 추론된 모델을 생성할 수 있다면 이 메서드는 추론된 모델을 번환하고, 생성할 수 없다면 nil을 반환합니다."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"만약 데이터 변경 사항이 자동 마이그레이션의 역량을 초과하는 경우, 중량(heavyweight) 마이그레이션을 수행할 수 있습니다(수동 마이그레이션이라고도 합니다)."}]},{"anchor":"Requesting-Lightweight-Migration","level":3,"type":"heading","text":"Requesting Lightweight Migration"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nspersistentstorecoordinator\/1468860-addpersistentstore"},{"type":"text","text":"에 전달하는 options 딕셔너리를 사용해 자동 경량 마이그레이션을 요청할 수 있습니다. "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmigratepersistentstoresautomaticallyoption"},{"type":"text","text":" 키와 "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsinfermappingmodelautomaticallyoption"},{"type":"text","text":" 키에 해당하는 값을 true로 설정합니다:"}]},{"type":"codeListing","syntax":"swift","code":["let psc = NSPersistentStoreCoordinator(managedObjectModel: mom)","let options = [NSMigratePersistentStoresAutomaticallyOption: true, NSInferMappingModelAutomaticallyOption: true]","do {","    try psc.addPersistentStore(ofType: NSSQLiteStoreType, configurationName: nil, at: storeURL, options: options)","} catch {","    fatalError(\"Failed to add persistent store: \\(error)\")","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"이러한 설정을 사용하면, Core Data는 영구 저장소가 더 이상 현재 모델과 일치하지 않음을 탐지할 때 경량 마이그레이션을 시도합니다."}]}]}],"schemaVersion":{"major":0,"minor":1,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/coredata_k\/using-lightweight-migration"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/CoreData_k\/documentation\/CoreData_k\/Using-Lightweight-Migration","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"경량(자동) 마이그레이션을 요청하여 앱의 변경사항에 맞게 데이터 모델을 업데이트합니다."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Using Lightweight Migration","role":"article","modules":[{"name":"CoreData_k"}]},"hierarchy":{"paths":[["doc:\/\/CoreData_k\/documentation\/CoreData_k"]]},"seeAlsoSections":[{"title":"Data Migration","identifiers":["doc:\/\/CoreData_k\/documentation\/CoreData_k\/Heavyweight-Migration"],"generated":true}],"references":{"https://developer.apple.com/documentation/coredata/nsmappingmodel":{"title":"NSMappingModel","titleInlineContent":[{"type":"text","text":"NSMappingModel"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel","url":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel"},"https://developer.apple.com/documentation/foundation/bundle/1413705-allbundles":{"title":"allBundles","titleInlineContent":[{"type":"text","text":"allBundles"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1413705-allbundles","url":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1413705-allbundles"},"https://developer.apple.com/documentation/foundation/bundle/1408056-allframeworks":{"title":"allFrameworks","titleInlineContent":[{"type":"text","text":"allFrameworks"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1408056-allframeworks","url":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle\/1408056-allframeworks"},"https://developer.apple.com/documentation/coredata/nsinfermappingmodelautomaticallyoption":{"title":"NSInferMappingModelAutomaticallyOption","titleInlineContent":[{"type":"text","text":"NSInferMappingModelAutomaticallyOption"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsinfermappingmodelautomaticallyoption","url":"https:\/\/developer.apple.com\/documentation\/coredata\/nsinfermappingmodelautomaticallyoption"},"https://developer.apple.com/documentation/foundation/bundle":{"title":"Bundle","titleInlineContent":[{"type":"text","text":"Bundle"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle","url":"https:\/\/developer.apple.com\/documentation\/foundation\/bundle"},"https://developer.apple.com/documentation/coredata/nsmappingmodel/1506468-inferredmappingmodel":{"title":"inferredMappingModel(forSourceModel:destinationModel:)","titleInlineContent":[{"type":"text","text":"inferredMappingModel(forSourceModel:destinationModel:)"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel\/1506468-inferredmappingmodel","url":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmappingmodel\/1506468-inferredmappingmodel"},"https://developer.apple.com/documentation/coredata/nspersistentstorecoordinator/1468860-addpersistentstore":{"title":"addPersistentStore(ofType:configurationName:at:options:)","titleInlineContent":[{"type":"text","text":"addPersistentStore(ofType:configurationName:at:options:)"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nspersistentstorecoordinator\/1468860-addpersistentstore","url":"https:\/\/developer.apple.com\/documentation\/coredata\/nspersistentstorecoordinator\/1468860-addpersistentstore"},"https://developer.apple.com/documentation/coredata/nsmigratepersistentstoresautomaticallyoption":{"title":"NSMigratePersistentStoresAutomaticallyOption","titleInlineContent":[{"type":"text","text":"NSMigratePersistentStoresAutomaticallyOption"}],"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmigratepersistentstoresautomaticallyoption","url":"https:\/\/developer.apple.com\/documentation\/coredata\/nsmigratepersistentstoresautomaticallyoption"},"doc://CoreData_k/documentation/CoreData_k":{"role":"collection","title":"CoreData_k","abstract":[{"type":"text","text":"단일 디바이스에서 데이터를 유지 또는 캐시하거나 CloudKit을 사용해 여러 디바이스에 데이터를 동기화합니다."}],"identifier":"doc:\/\/CoreData_k\/documentation\/CoreData_k","kind":"symbol","type":"topic","url":"\/documentation\/coredata_k"},"doc://CoreData_k/documentation/CoreData_k/Heavyweight-Migration":{"role":"collectionGroup","title":"Heavyweight Migration","abstract":[{"type":"text","text":"데이터 모델의 변경 사항이 경량 마이그레이션의 역량을 초과하는 드문 경우에 중량(수동) 마이그레이션을 사용합니다."}],"identifier":"doc:\/\/CoreData_k\/documentation\/CoreData_k\/Heavyweight-Migration","kind":"article","type":"topic","url":"\/documentation\/coredata_k\/heavyweight-migration"}}}